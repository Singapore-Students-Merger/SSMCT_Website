(()=>{var e={};e.id=8231,e.ids=[8231],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73190:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>f,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>p});var s={};r.r(s),r.d(s,{GET:()=>c});var n=r(42706),o=r(28203),i=r(45994),a=r(39187),l=r(86681);async function c(){try{let e=await (0,l.O)();return a.NextResponse.json(e)}catch(e){return e instanceof Error&&console.error(e.message),a.NextResponse.json({error:!0})}}let d=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/members/route",pathname:"/api/members",filename:"route",bundlePath:"app/api/members/route"},resolvedPagePath:"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\api\\members\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:u,workUnitAsyncStorage:p,serverHooks:f}=d;function m(){return(0,i.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:p})}},96487:()=>{},78335:()=>{},84908:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(96330);let n=global.prisma||new s.PrismaClient({log:["query"]})},86681:(e,t,r)=>{"use strict";r.d(t,{O:()=>i});var s=r(84908);let n=null,o=0;async function i(){let e=Date.now();return(!n||e-o>36e5)&&(n=await a(),o=e),n}async function a(){return(await s.A.user.findMany({select:{name:!0,realName:!0,ctfs:{select:{ctfId:!0}},discordUser:{select:{discordRoles:{where:{NOT:{discordRole:{linkedRole:null}}},select:{discordRole:{select:{linkedRole:{select:{title:!0,type:!0,linkedEvent:{select:{ctf:{select:{ctfId:!0}}}}}}}}}}}},userroles:{select:{role:{select:{title:!0,type:!0,linkedEvent:{select:{ctf:{select:{ctfId:!0}}}}}}}}}})).map(e=>{let t=[],r=new Set;for(let s of e.userroles){let e=s.role;("organiser"==e.type||"admin"==e.type||"developer"==e.type)&&t.push(e.title),e.linkedEvent?.ctf&&r.add(e.linkedEvent.ctf.ctfId)}for(let s of e.discordUser?.discordRoles??[]){let e=s.discordRole.linkedRole;e&&(("organiser"==e.type||"admin"==e.type||"developer"==e.type)&&t.push(e.title),e.linkedEvent?.ctf&&r.add(e.linkedEvent.ctf.ctfId))}for(let t of e.ctfs)r.add(t.ctfId);return{username:e.name??"",realName:e.realName??"",roles:t,ctfCount:r.size}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(73190));module.exports=s})();