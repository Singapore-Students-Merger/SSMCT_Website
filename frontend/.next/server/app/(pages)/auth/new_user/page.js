(()=>{var e={};e.id=5882,e.ids=[5882],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},94354:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=t(70260),n=t(28203),o=t(25155),i=t.n(o),a=t(67292),d={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(r,d);let l=["",{children:["(pages)",{children:["auth",{children:["new_user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29045)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\(pages)\\auth\\new_user\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,7752)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,21154)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\(pages)\\auth\\new_user\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(pages)/auth/new_user/page",pathname:"/auth/new_user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},15702:(e,r,t)=>{Promise.resolve().then(t.bind(t,30302))},10974:(e,r,t)=>{Promise.resolve().then(t.bind(t,43e3))},62149:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(45512),n=t(94805);let o=({children:e,onClick:r,beforeIcon:t,afterIcon:o,className:i,type:a="button",version:d="primary",shadow:l=!0,border:c=!0,disabled:u=!1})=>{let p=`
        text-primary
        ${l?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":""}
        rounded-full
        px-4 py-2
        font-semibold
        hover:brightness-90 
        transition
        duration-200
        flex items-center justify-center
        text-lg
        focus:outline-none
        focus:ring-2
        focus:ring-primary
        flex 
        justify-between
    `;return(0,s.jsxs)("button",{className:(0,n.QP)(p,"primary"===d?"bg-secondary-tier3":"bg-secondary-tier2/50",c?"border-2 border-secondary-tier2":"",i),onClick:r,type:a,disabled:u,children:[t&&(0,s.jsx)("span",{className:"mr-2",children:t}),(0,s.jsx)("div",{className:"grow",children:e}),o&&(0,s.jsx)("span",{className:"ml-2",children:o})]})}},32692:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(45512),n=t(94805);let o=({className:e,gradientPosition:r="center",children:t})=>(0,s.jsx)("div",{className:(0,n.QP)("w-full h-full","x-center"===r?"bg-gradient-to-r from-background via-secondary-tier3/80 to-background":"y-center"===r?"bg-gradient-to-b from-background via-secondary-tier3/80 to-background":"center"===r?"bg-radient-ellipse-c from-secondary-tier3/80 from-30% to-background to-100%":"top"===r?"bg-gradient-to-t from-secondary-tier3/80 to-background":"bottom"===r?"bg-gradient-to-b from-secondary-tier3/80 to-background":"left"===r?"bg-gradient-to-l from-secondary-tier3/80 to-background":"right"===r?"bg-gradient-to-r from-secondary-tier3/80 to-background":"",e),children:t})},86397:(e,r,t)=>{"use strict";t.d(r,{A:()=>d});var s=t(45512);t(58009);var n=t(43675),o=t(18746),i=t(94805),a=t(29121);let d=({options:e,placeholder:r,onChange:t,className:d,version:l="primary",shadow:c=!0,border:u=!0,label:p,name:m,value:h,required:g=!1})=>{let x=`
    text-primary
    ${c?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":""}
    rounded-full
    px-0 py-0
    font-semibold
    hover:brightness-90 
    transition
    duration-200
    text-lg
    focus:outline-none
    focus:ring-2
    focus:ring-primary
    min-w-72
    relative 
    z-10
  `;return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:(0,i.QP)(x,"primary"===l?"bg-secondary-tier1/50":"bg-secondary-tier3",u?"border-2 border-secondary-tier2":"",d),children:(0,s.jsx)(o.Ay,{options:e,placeholder:r,onChange:t,styles:{control:e=>({...e,backgroundColor:"transparent",border:"none",boxShadow:"none",padding:"0.25rem 1rem 0.25rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",margin:0}),valueContainer:e=>({...e,padding:0}),menu:e=>({...e,borderRadius:"0.5rem",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:"rgb(63, 100, 115)",zIndex:10,margin:0}),menuList:e=>({...e,padding:0,zIndex:10,margin:0}),option:(e,r)=>({...e,backgroundColor:"transparent",backdropFilter:r.isSelected?"brightness(0.8)":r.isFocused?"brightness(0.7)":"none",color:"inherit",padding:"8px 1rem",width:"100%",cursor:"pointer"}),placeholder:e=>({...e,color:"inherit"}),singleValue:e=>({...e,color:"inherit"}),dropdownIndicator:e=>({...e,color:"currentColor",padding:"0 0"}),indicatorSeparator:()=>({display:"none"}),clearIndicator:e=>({...e,padding:0})},components:{DropdownIndicator:e=>(0,s.jsx)(n.c.DropdownIndicator,{...e,children:(0,s.jsx)(a.A,{})})},name:m,value:h,required:g})}),p&&(0,s.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:p})]})}},87010:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(45512),n=t(94805);let o=({value:e,placeholder:r,onInput:t,beforeIcon:o,afterIcon:i,className:a,version:d="primary",shadow:l=!0,label:c,name:u,required:p=!1,onChange:m,onBlur:h,onFocus:g,disabled:x=!1,onClick:f})=>{let b=`
        text-primary
        ${l?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":""}
        rounded-full
        px-4 py-2
        font-semibold
        hover:brightness-90 
        transition
        duration-200
        flex items-center justify-center
        text-lg
        focus:outline-none
        focus:ring-2
        focus:ring-primary
        flex 
        justify-between
        min-w-72
    `;return(0,s.jsxs)("div",{className:"flex flex-col gap-2",onClick:f,children:[(0,s.jsxs)("div",{className:(0,n.QP)(b,"primary"===d?"bg-secondary-tier1/50":"bg-secondary-tier3","border-2 border-secondary-tier2",a),children:[o&&(0,s.jsx)("span",{className:"mr-2",children:o}),(0,s.jsx)("input",{disabled:x,className:"bg-transparent w-full placeholder:text-primary placeholder:font-normal",onInput:t,onChange:m,onBlur:h,onFocus:g,placeholder:r,type:"text",value:e??"",name:u,required:p}),i&&(0,s.jsx)("span",{className:"ml-2",children:i})]}),c&&(0,s.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:c})]})}},43e3:(e,r,t)=>{"use strict";t.d(r,{default:()=>p});var s=t(45512),n=t(58009),o=t(62149),i=t(32692),a=t(87010),d=t(86397),l=t(94805);let c=({selected:e,className:r,children:t,beforeIcon:o,afterIcon:i,onClick:a,beforeIconClickHandler:d,afterIconClickHandler:c})=>{let[u,p]=(0,n.useState)(e);return(0,s.jsxs)("div",{onClick:()=>{a&&a(),p(e=>!e)},className:(0,l.QP)("bg-tertiary text-primary w-fit text-lg px-4 py-2 rounded-full cursor-pointer hover:brightness-50 transition-[filter] duration-200",u?"brightness-75 outline-primary outline-2 outline":"brightness-100",r),children:[o&&(0,s.jsx)("div",{onClick:d,children:o}),(0,s.jsx)("div",{children:t}),i&&(0,s.jsx)("div",{onClick:c,children:i})]})};var u=t(22403);function p({name:e,categories:r}){let[t,l]=(0,n.useState)(e||""),[p,m]=(0,n.useState)(""),[h,g]=(0,n.useState)("-1"),[x,f]=(0,n.useState)([]),b=r.map(e=>({value:e.id,label:e.name}));b.unshift({value:-1,label:"None"});let y=async()=>{if(!t.trim()){u.Ay.error("Display Name is required");return}if(""!=p&&!p.trim()){u.Ay.error("Did you think I wouldn't validate this :C? Please input your real name or leave it empty.");return}u.Ay.promise(fetch("/api/users/update-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({displayName:t,realName:p,mainCategoryId:"-1"==h?null:parseInt(h),interests:x})}).then(async e=>e.ok?(window.location.href="/",Promise.resolve("User updated successfully")):Promise.reject((await e.json()).error||"Failed to update user")).catch(e=>{throw console.error("Error:",e),Error(e||"A network error occurred. Please try again.")}),{loading:"Updating user...",success:e=>e,error:e=>e.message||"An error occurred"})};return(0,s.jsxs)(i.A,{gradientPosition:"center",className:"min-h-screen flex items-center flex-col gap-8 justify-start py-20 px-10 md:px-20",children:[(0,s.jsxs)("h1",{className:"text-5xl font-bold text-center",children:[" Welcome ",e]}),(0,s.jsx)("p",{className:"text-white text-2xl text-center",children:"Before we begin, please tell us more about yourself"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-10 lg:grid-cols-3 w-full justify-center ",children:[(0,s.jsx)(a.A,{placeholder:"Display Name",className:"rounded-xl",label:"Display Name",value:t,onChange:e=>l(e.target.value)}),(0,s.jsx)(a.A,{placeholder:"Real Name",className:"rounded-xl",label:"Name (optional)",value:p,onChange:e=>m(e.target.value)}),(0,s.jsx)(d.A,{placeholder:"Select Main Category",className:"rounded-xl",label:"Main Category",options:b,onChange:e=>g(e.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"border-2 border-secondary-tier2 w-full min-h-72 rounded-lg flex flex-wrap gap-4 items-start content-start px-4 py-4",children:r.map((e,r)=>(0,s.jsx)(c,{onClick:()=>{f(r=>r.includes(e.id)?r.filter(r=>r!==e.id):[...r,e.id])},selected:x.includes(e.id),children:e.name},r))}),(0,s.jsx)("p",{className:"text-primary text-lg md:text-md py-2 ml-2",children:"Categories of Interest"})]}),(0,s.jsx)(o.A,{className:"px-10",onClick:y,children:"Continue"}),(0,s.jsx)(u.Toaster,{})]})}},29121:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(45512),n=t(58009);let o=t.n(n)().forwardRef(({className:e,fill:r,...t},n)=>(0,s.jsx)("svg",{className:e,ref:n,...t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7 15L12 20L17 15M7 9L12 4L17 9",stroke:"#BAEAFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",color:r||"#BAEAFF"})}));o.displayName="Search";let i=o},29045:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,dynamic:()=>a});var s=t(62740),n=t(85562),o=t(31831),i=t(30302);let a="force-dynamic";async function d(){let e=await (0,n.j)();e||(0,o.redirect)("/auth/signin");let r=await fetch("https://ssmct.org/api/categories").then(e=>e.json()).catch(e=>(console.error("Error:",e),[]));return(0,s.jsx)(i.default,{name:e.user.name,categories:r})}},85562:(e,r,t)=>{"use strict";t.d(r,{$:()=>d,j:()=>l});var s=t(51825),n=t(64912),o=t(86259),i=t(84908);let a=async e=>{let r=process.env.DISCORD_GUILD_ID,t=await fetch("https://discord.com/api/v10/users/@me/guilds",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw console.error("Failed to fetch user's Discord guilds"),Error("Failed to fetch user's Discord guilds");return!!(await t.json()).some(e=>e.id===r)||(console.error("User is not in the required Discord guild"),!1)},d={adapter:(0,o.y)(i.A),pages:{signIn:"/",signOut:"/auth/signout",error:"/auth/signin",newUser:"/auth/new_user"},session:{strategy:"database"},providers:[(0,n.A)({clientId:process.env.DISCORD_CLIENT_ID,clientSecret:process.env.DISCORD_CLIENT_SECRET,authorization:{params:{scope:"identify guilds guilds.members.read"}},token:"https://discord.com/api/oauth2/token",userinfo:"https://discord.com/api/users/@me",profile:e=>({id:e.id,name:e.username,image:e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.png`:null})})],callbacks:{async signIn({account:e,user:r}){if(!e||!r)return!1;if("discord"===e.provider){if(console.log(e),!e.access_token)return!1;if(!await a(e.access_token))throw Error("User is not in the required Discord guild")}return!0},session:async({session:e,user:r})=>(e?.user&&(e.user.id=r.id),e)}};function l(...e){return(0,s.getServerSession)(...e,d)}},30302:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\czhon\\\\Documents\\\\GitHub\\\\SSMCT_Website\\\\frontend\\\\src\\\\components\\\\UserForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\components\\UserForm.tsx","default")},84908:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(96330);let n=global.prisma||new s.PrismaClient({log:["query"]})},51520:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(88077);let n=async e=>[{type:"image/x-icon",sizes:"256x256",url:(0,s.fillMetadataSegment)(".",await e.params,"icon.ico")+"?9e7b4703bc721ed4"}]}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,2888,6622,8433,8746,6493,1652],()=>t(94354));module.exports=s})();