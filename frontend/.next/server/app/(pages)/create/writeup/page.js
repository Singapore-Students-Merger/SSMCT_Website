(()=>{var e={};e.id=6070,e.ids=[6070],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},70624:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(70260),i=t(28203),n=t(25155),a=t.n(n),o=t(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["(pages)",{children:["create",{children:["writeup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,42361)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\(pages)\\create\\writeup\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,7752)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,21154)),"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,51520))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\app\\(pages)\\create\\writeup\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(pages)/create/writeup/page",pathname:"/create/writeup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16542:(e,r,t)=>{Promise.resolve().then(t.bind(t,42406))},8294:(e,r,t)=>{Promise.resolve().then(t.bind(t,24394))},24394:(e,r,t)=>{"use strict";t.d(r,{default:()=>p});var s=t(45512),i=t(32692),n=t(87010),a=t(86397),o=t(62149),l=t(22403);t(94047);var d=t(58009),c=t(77360),u=t(81441);function p(){let[e,r]=(0,d.useState)([]),[t,p]=(0,d.useState)([]),[m,x]=(0,d.useState)([]),[h,f]=(0,d.useState)([]),[g,b]=(0,d.useState)(null),[y,v]=(0,d.useState)(null),[j,w]=(0,d.useState)(null),[C,S]=(0,d.useState)([]),[T,q]=(0,d.useState)(""),[_,N]=(0,d.useState)([]),[k,D]=(0,d.useState)({Title:"",Difficulty:"",Link:"",Category:"",Topics:[],Description:""}),P=e=>{S(r=>{let t=r.includes(e)?r.filter(r=>r!==e):[...r,e];return D(e=>({...e,Topics:t})),t})},A=e=>{let{name:r,value:t}=e.target;D(e=>({...e,[r]:t}))};async function L(e){e.preventDefault();let r=e.currentTarget;r.disabled=!0;try{let e=new FormData;e.append("Title",k.Title),e.append("Difficulty",k.Difficulty||""),!k.Link||k.Link.startsWith("http://")||k.Link.startsWith("https://")||(k.Link="http://"+k.Link),e.append("Category",k.Category||""),e.append("Topics",JSON.stringify(k.Topics)),e.append("CTF",JSON.stringify(j)),e.append("Description",k.Description),h.forEach(r=>e.append("assets",r)),g&&e.append("WriteupThumbnail",g),y&&e.append("WriteupFile",y);let t=fetch("/api/writeups/upload",{method:"POST",body:e}).then(e=>e.json()).then(e=>{if("success"===e.status)D({Title:"",Difficulty:"",Link:"",Category:"",Topics:[],Description:""}),b(null),v(null),N([]),r.disabled=!1;else throw Error(`${e.error} ${e.issues?.join(", ")}`);return e}).catch(e=>{throw e});l.Ay.promise(t,{loading:"Creating writeup...",success:"Writeup successfully created",error:e=>`Failed to create writeup: ${e.message}`})}catch(e){console.error("Error during submit:",e),r.disabled=!1}}let[W,F]=(0,d.useState)(!1);return W?(0,s.jsxs)(i.A,{gradientPosition:"center",className:"p-10",children:[(0,s.jsx)("h1",{className:"text-[3rem] font-bold",children:"Create Writeup"}),(0,s.jsx)(l.Toaster,{}),(0,s.jsxs)("form",{onSubmit:L,className:"grid grid-cols-3 grid-rows-[6rem_6rem_6rem_6rem_6rem_6rem] my-5 gap-y-0 gap-x-10",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(n.A,{placeholder:"Title",version:"secondary",className:"rounded-xl",name:"Title",value:k.Title,onChange:A,required:!0}),(0,s.jsx)("label",{children:"Title (Required)"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.A,{className:"rounded-xl h-[3rem] text-left",placeholder:"Select Difficulty",name:"Difficulty",options:[{value:"",label:"Select Difficulty"},{value:"Easy",label:"Easy"},{value:"Medium",label:"Medium"},{value:"Hard",label:"Hard"},{value:"Insane",label:"Insane"},{value:"Impossible",label:"Impossible"}],onChange:e=>{e?D(r=>({...r,Difficulty:e.value})):D(e=>({...e,Difficulty:""}))},required:!0}),(0,s.jsx)("label",{children:"Difficulty (Required)"})]}),(0,s.jsx)(c.yu,{accept:".md,.markdown",onFileUpload:e=>{e&&v(e)},label:"Writeup File (required)",file:y,required:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.A,{className:"rounded-xl h-[3rem] text-left",placeholder:"Select Category",options:e,name:"Category",onChange:e=>{e?D(r=>({...r,Category:e.value})):D(e=>({...e,Category:""}))},required:!0}),(0,s.jsx)("label",{children:"Category (Required)"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(n.A,{placeholder:"Link to challenge source",version:"secondary",className:"rounded-xl",name:"Link",value:k.Link,onChange:A}),(0,s.jsx)("label",{children:"Source"})]}),(0,s.jsx)(c.VY,{accept:"image/*",onFileUpload:e=>{e&&b(e)},label:"Writeup Thumbnail",file:g}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(u.A,{options:m.map(e=>({label:e.title,id:e.id})),setSelectedOption:e=>{e?w({title:e.label,id:e.id}):w(null)},placeholder:"CTF"}),(0,s.jsxs)("label",{children:["Related CTF ",j?.title==""?"(Required)":!j?.id&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:"(CTF not found. It will be created.)"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 row-span-5",children:[(0,s.jsxs)("div",{className:"rounded-xl h-[calc(22rem+2px)]  bg-secondary-tier1/50 border-2 border-secondary-tier2",children:[(0,s.jsx)(n.A,{onChange:e=>{q(e.target.value)},value:T,className:"h-[3rem] items-center px-4 text-primary flex text-lg rounded-b-none rounded-t-xl",placeholder:"Search Topics"}),(0,s.jsx)("div",{className:"overflow-auto text-primary h-[calc(19rem-2px)] rounded-none rounded-bl-xl rounded-br-xl w-[100%] bg-secondary-tier3 resize-none",children:t.map((e,r)=>e.name.toLowerCase().includes(T.toLowerCase())?(0,s.jsx)("span",{className:`rounded-full py-1 my-2 px-3 mx-1 inline-block bg-secondary-tier1/50 hover:cursor-pointer hover:brightness-125 ${C.includes(e.id)?"bg-primary-tier1 text-white":"bg-secondary-tier1/50 text-primary"}`,onClick:()=>P(e.id),children:e.name},r):null)})]}),(0,s.jsx)("label",{children:"Topics"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 row-span-3 justify-start items-start",children:[(0,s.jsx)("textarea",{className:"text-primary placeholder-primary h-[20rem] rounded-xl w-[100%] bg-secondary-tier3 resize-none border-2 border-secondary-tier2 px-4 py-2 text-lg",placeholder:"Description",name:"Description",value:k.Description,onChange:A}),(0,s.jsx)("label",{children:"Description"})]}),(0,s.jsx)(c.vs,{info:"Upload ALL images used in your writeup",files:h,onFilesUpload:f,expectedFiles:_,label:"Writeup Assets",accept:"image/*"}),(0,s.jsx)(o.A,{type:"submit",className:"row-span-1 h-[4rem] rounded-xl mt-[1rem] col-span-3",children:"Create"})]})]}):null}},86397:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(45512);t(58009);var i=t(43675),n=t(18746),a=t(94805),o=t(29121);let l=({options:e,placeholder:r,onChange:t,className:l,version:d="primary",shadow:c=!0,border:u=!0,label:p,name:m,value:x,required:h=!1})=>{let f=`
    text-primary
    ${c?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":""}
    rounded-full
    px-0 py-0
    font-semibold
    hover:brightness-90 
    transition
    duration-200
    text-lg
    focus:outline-none
    focus:ring-2
    focus:ring-primary
    min-w-72
    relative 
    z-10
  `;return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:(0,a.QP)(f,"primary"===d?"bg-secondary-tier1/50":"bg-secondary-tier3",u?"border-2 border-secondary-tier2":"",l),children:(0,s.jsx)(n.Ay,{options:e,placeholder:r,onChange:t,styles:{control:e=>({...e,backgroundColor:"transparent",border:"none",boxShadow:"none",padding:"0.25rem 1rem 0.25rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",margin:0}),valueContainer:e=>({...e,padding:0}),menu:e=>({...e,borderRadius:"0.5rem",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:"rgb(63, 100, 115)",zIndex:10,margin:0}),menuList:e=>({...e,padding:0,zIndex:10,margin:0}),option:(e,r)=>({...e,backgroundColor:"transparent",backdropFilter:r.isSelected?"brightness(0.8)":r.isFocused?"brightness(0.7)":"none",color:"inherit",padding:"8px 1rem",width:"100%",cursor:"pointer"}),placeholder:e=>({...e,color:"inherit"}),singleValue:e=>({...e,color:"inherit"}),dropdownIndicator:e=>({...e,color:"currentColor",padding:"0 0"}),indicatorSeparator:()=>({display:"none"}),clearIndicator:e=>({...e,padding:0})},components:{DropdownIndicator:e=>(0,s.jsx)(i.c.DropdownIndicator,{...e,children:(0,s.jsx)(o.A,{})})},name:m,value:x,required:h})}),p&&(0,s.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:p})]})}},29121:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(45512),i=t(58009);let n=t.n(i)().forwardRef(({className:e,fill:r,...t},i)=>(0,s.jsx)("svg",{className:e,ref:i,...t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M7 15L12 20L17 15M7 9L12 4L17 9",stroke:"#BAEAFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",color:r||"#BAEAFF"})}));n.displayName="Search";let a=n},94047:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var s=t(33873),i=t.n(s);function n(e){let r;let t=/!\[.*?\]\((.*?)\)/g,s=new Set;for(;null!==(r=t.exec(e));){let e=r[1].trim(),t=i().basename(e);s.add(t)}return Array.from(s)}},42361:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l,dynamic:()=>o});var s=t(62740),i=t(85562),n=t(31831),a=t(42406);let o="force-dynamic";async function l(){return await (0,i.j)()||(0,n.redirect)("/auth/signin"),(0,s.jsx)(a.default,{})}},42406:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\czhon\\\\Documents\\\\GitHub\\\\SSMCT_Website\\\\frontend\\\\src\\\\components\\\\CreateWriteupPage.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\czhon\\Documents\\GitHub\\SSMCT_Website\\frontend\\src\\components\\CreateWriteupPage.tsx","default")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,2888,6622,8433,8746,6493,1652,221],()=>t(70624));module.exports=s})();