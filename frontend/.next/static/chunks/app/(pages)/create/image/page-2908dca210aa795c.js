(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1013],{115:(e,r,t)=>{Promise.resolve().then(t.bind(t,7354))},5565:(e,r,t)=>{"use strict";t.d(r,{default:()=>n.a});var l=t(4146),n=t.n(l)},4146:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return i},getImageProps:function(){return o}});let l=t(306),n=t(666),a=t(7970),s=l._(t(5514));function o(e){let{props:r}=(0,n.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let i=a.Image},6911:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var l=t(5155),n=t(9795);let a=e=>{let{children:r,onClick:t,beforeIcon:a,afterIcon:s,className:o,type:i="button",version:d="primary",shadow:c=!0,border:u=!0,disabled:m=!1}=e;return(0,l.jsxs)("button",{className:(0,n.QP)("\n        text-primary\n        ".concat(c?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n        rounded-full\n        px-4 py-2\n        font-semibold\n        hover:brightness-90 \n        transition\n        duration-200\n        flex items-center justify-center\n        text-lg\n        focus:outline-none\n        focus:ring-2\n        focus:ring-primary\n        flex \n        justify-between\n    "),"primary"===d?"bg-secondary-tier3":"bg-secondary-tier2/50",u?"border-2 border-secondary-tier2":"",o),onClick:t,type:i,disabled:m,children:[a&&(0,l.jsx)("span",{className:"mr-2",children:a}),(0,l.jsx)("div",{className:"grow",children:r}),s&&(0,l.jsx)("span",{className:"ml-2",children:s})]})}},7354:(e,r,t)=>{"use strict";t.d(r,{default:()=>x});var l=t(5155),n=t(2978),a=t(3714),s=t(6911),o=t(5037),i=t(2115),d=t(6203),c=t(6723),u=t(9795);let m=e=>{let{value:r,placeholder:t,onInput:n,beforeIcon:a,afterIcon:s,className:o,version:i="primary",shadow:d=!0,label:c,name:m,required:p=!1,onChange:x,onBlur:f,onFocus:h}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:(0,u.QP)("\n        text-primary\n        ".concat(d?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n        rounded-full\n        px-4 py-2\n        font-semibold\n        hover:brightness-90 \n        transition\n        duration-200\n        flex items-center justify-center\n        text-lg\n        focus:outline-none\n        focus:ring-2\n        focus:ring-primary\n        flex \n        justify-between\n        min-w-72\n    "),"primary"===i?"bg-secondary-tier1/50":"bg-secondary-tier3","border-2 border-secondary-tier2",o),children:[a&&(0,l.jsx)("span",{className:"mr-2",children:a}),(0,l.jsx)("input",{className:"bg-transparent w-full placeholder:text-primary placeholder:font-normal",onInput:n,onChange:x,onBlur:f,onFocus:h,placeholder:t,type:"date",value:null!=r?r:"",name:m,required:p}),s&&(0,l.jsx)("span",{className:"ml-2",children:s})]}),c&&(0,l.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:c})]})},p=e=>{let r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return"".concat(r,"-").concat(t,"-").concat(l)};function x(){var e;let[r,t]=(0,i.useState)([]),[u,x]=(0,i.useState)({title:"",image:null,event:null,description:"",date:p(new Date)}),f=e=>{let{name:r,value:t}=e.target;x(e=>({...e,[r]:t}))};return(0,i.useEffect)(()=>{fetch("/api/events?fields=names").then(e=>e.json()).then(e=>{t(e.map(e=>({id:e.id,label:e.title})))}).catch(()=>{o.Ay.error("Failed to fetch events")})},[]),(0,l.jsxs)(n.A,{gradientPosition:"center",className:"p-10 min-h-screen",children:[(0,l.jsx)("h1",{className:"text-[3rem] mb-10 font-bold",children:"Upload Image"}),(0,l.jsx)(o.Toaster,{}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=new FormData;for(let e in u){let t=u[e];if(null===t){o.Ay.error("Please fill in all the fields");return}t instanceof File?r.append(e,t):t instanceof Object?r.append(e,JSON.stringify(t)):r.append(e,t)}fetch("/api/images/upload",{method:"POST",body:r}).then(e=>e.json()).then(e=>{"error"==e.status?o.Ay.error(e.error):o.Ay.success("Image uploaded successfully")}).catch(e=>{o.Ay.error("Failed to upload image: "+e.message)})},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 my-5 gap-y-2 gap-x-10",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(a.A,{placeholder:"Title",version:"secondary",className:"rounded-xl",name:"title",value:u.title,onChange:f,required:!0}),(0,l.jsx)("label",{children:"Title"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 row-span-3 justify-start items-start",children:[(0,l.jsx)("textarea",{className:"text-primary placeholder-primary h-[20rem] rounded-xl w-[100%] bg-secondary-tier3 resize-none border-2 border-secondary-tier2 px-4 py-2 text-lg",placeholder:"Description",name:"description",value:u.description,onChange:f,required:!0}),(0,l.jsx)("label",{children:"Description"})]}),(0,l.jsx)("div",{className:"row-span-2",children:(0,l.jsx)(d.A,{accept:"image/*",onFileUpload:e=>{x(r=>({...r,image:e}))},label:"Image",file:u.image})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(c.A,{options:r,setSelectedOption:e=>{e?x(r=>({...r,event:{title:e.label,id:e.id}})):x(e=>({...e,event:null}))},placeholder:"CTF"}),(0,l.jsxs)("label",{children:["Related Event ",!(null===(e=u.event)||void 0===e?void 0:e.id)&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:"(Event not found. It will be created.)"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(m,{placeholder:"Date",version:"secondary",className:"rounded-xl",name:"date",value:u.date,onChange:f,required:!0}),(0,l.jsx)("label",{children:"Date Taken"})]}),(0,l.jsx)(s.A,{type:"submit",className:"col-span-1 md:col-span-2 lg:col-span-1 h-[3rem] rounded-xl mt-[1rem] order-",children:"Create"})]})]})}},2978:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var l=t(5155),n=t(9795);let a=e=>{let{className:r,gradientPosition:t="center",children:a}=e;return(0,l.jsx)("div",{className:(0,n.QP)("w-full h-full","x-center"===t?"bg-gradient-to-r from-background via-secondary-tier3/80 to-background":"y-center"===t?"bg-gradient-to-b from-background via-secondary-tier3/80 to-background":"center"===t?"bg-radient-ellipse-c from-secondary-tier3/80 from-30% to-background to-100%":"top"===t?"bg-gradient-to-t from-secondary-tier3/80 to-background":"bottom"===t?"bg-gradient-to-b from-secondary-tier3/80 to-background":"left"===t?"bg-gradient-to-l from-secondary-tier3/80 to-background":"right"===t?"bg-gradient-to-r from-secondary-tier3/80 to-background":"",r),children:a})}},6723:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var l=t(5155),n=t(2115),a=t(3714);let s=e=>{let{option:r,setOption:t}=e;return(0,l.jsx)("div",{className:"font-bold cursor-pointer flex items-center gap-2 w-full py-2 px-4 hover:brightness-90 hover:backdrop-brightness-90",onClick:()=>{console.log(r.label),t(r.label)},children:(0,l.jsx)("span",{children:r.label})})},o=e=>{let{className:r,options:t,setSelectedOption:o,placeholder:i}=e;console.log(t);let[d,c]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=t.find(e=>e.label===d);e?o(e):o({label:d,id:null})},[d]),(0,l.jsxs)("div",{className:"".concat(r," relative"),children:[(0,l.jsx)(a.A,{value:d,onChange:e=>{c(e.target.value)},className:"rounded-xl",placeholder:i,onFocus:()=>{m(!0)},onBlur:()=>{setTimeout(()=>{m(!1)},100)}}),u&&(0,l.jsx)("div",{className:"overflow-auto flex flex-col absolute top-full left-0 bg-[#3f6473] rounded-xl w-full max-h-[33vh] h-fit",children:t.map(e=>{if(e.label.toLowerCase().includes(d.toLowerCase())){var r;return(0,l.jsx)(s,{option:e,setOption:c},null!==(r=e.id)&&void 0!==r?r:e.label)}})})]})}},3714:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var l=t(5155),n=t(9795);let a=e=>{let{value:r,placeholder:t,onInput:a,beforeIcon:s,afterIcon:o,className:i,version:d="primary",shadow:c=!0,label:u,name:m,required:p=!1,onChange:x,onBlur:f,onFocus:h,disabled:g=!1,onClick:b}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",onClick:b,children:[(0,l.jsxs)("div",{className:(0,n.QP)("\n        text-primary\n        ".concat(c?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n        rounded-full\n        px-4 py-2\n        font-semibold\n        hover:brightness-90 \n        transition\n        duration-200\n        flex items-center justify-center\n        text-lg\n        focus:outline-none\n        focus:ring-2\n        focus:ring-primary\n        flex \n        justify-between\n        min-w-72\n    "),"primary"===d?"bg-secondary-tier1/50":"bg-secondary-tier3","border-2 border-secondary-tier2",i),children:[s&&(0,l.jsx)("span",{className:"mr-2",children:s}),(0,l.jsx)("input",{disabled:g,className:"bg-transparent w-full placeholder:text-primary placeholder:font-normal",onInput:a,onChange:x,onBlur:f,onFocus:h,placeholder:t,type:"text",value:null!=r?r:"",name:m,required:p}),o&&(0,l.jsx)("span",{className:"ml-2",children:o})]}),u&&(0,l.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:u})]})}},6203:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var l=t(5155),n=t(2115),a=t(5565);let s=e=>{let{onFileUpload:r,label:t,file:s,accept:o}=e,[i,d]=n.useState(null);return console.log(s),(0,l.jsxs)("div",{className:"flex flex-col gap-2 row-span-2",children:[(0,l.jsxs)("div",{className:"relative rounded-xl h-[calc(9rem+2px)] bg-secondary-tier1/50 z-10 border-2 border-secondary-tier2",children:[(0,l.jsxs)("div",{className:"flex flex-row h-[3rem] items-center",children:[(0,l.jsx)("p",{className:"px-4 text-primary text-lg",children:t}),(0,l.jsx)(a.default,{src:"/assets/record.png",className:"h-[1.5rem] w-[1.5rem] m-auto mr-3 block",height:3,width:3,alt:"upload"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center text-primary h-[calc(6rem-2px)] rounded-none rounded-bl-xl rounded-br-xl w-full bg-secondary-tier3 resize-none",children:[(0,l.jsx)("input",{type:"file",className:"top-0 absolute opacity-0 w-full rounded-none rounded-bl-xl rounded-br-xl h-full",onChange:e=>{var t;let l=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;r(l),l&&l.type.startsWith("image/")&&d(URL.createObjectURL(l))},name:"WriteupFile",accept:o,required:!0}),i?(0,l.jsx)(a.default,{src:i,alt:"Preview",className:"rounded-sm h-full",layout:"fill"}):s&&(0,l.jsx)("p",{className:"text-primary text-lg text-center",children:s.name})]})]}),(0,l.jsx)("label",{htmlFor:"WriteupFile",children:t})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[9795,7970,5037,8441,1517,7358],()=>r(115)),_N_E=e.O()}]);