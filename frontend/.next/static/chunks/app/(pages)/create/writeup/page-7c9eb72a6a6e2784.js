(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6070],{4562:(e,r,t)=>{Promise.resolve().then(t.bind(t,1026))},5565:(e,r,t)=>{"use strict";t.d(r,{default:()=>a.a});var l=t(4146),a=t.n(l)},4146:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return i},getImageProps:function(){return o}});let l=t(306),a=t(666),n=t(7970),s=l._(t(5514));function o(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let i=n.Image},6911:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var l=t(5155),a=t(9795);let n=e=>{let{children:r,onClick:t,beforeIcon:n,afterIcon:s,className:o,type:i="button",version:c="primary",shadow:d=!0,border:u=!0,disabled:p=!1}=e;return(0,l.jsxs)("button",{className:(0,a.QP)("\n        text-primary\n        ".concat(d?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n        rounded-full\n        px-4 py-2\n        font-semibold\n        hover:brightness-90 \n        transition\n        duration-200\n        flex items-center justify-center\n        text-lg\n        focus:outline-none\n        focus:ring-2\n        focus:ring-primary\n        flex \n        justify-between\n    "),"primary"===c?"bg-secondary-tier3":"bg-secondary-tier2/50",u?"border-2 border-secondary-tier2":"",o),onClick:t,type:i,disabled:p,children:[n&&(0,l.jsx)("span",{className:"mr-2",children:n}),(0,l.jsx)("div",{className:"grow",children:r}),s&&(0,l.jsx)("span",{className:"ml-2",children:s})]})}},1026:(e,r,t)=>{"use strict";t.d(r,{default:()=>p});var l=t(5155),a=t(2978),n=t(3714),s=t(6815),o=t(6911),i=t(5037),c=t(2115),d=t(6203),u=t(6723);function p(){let[e,r]=(0,c.useState)([]),[t,p]=(0,c.useState)([]),[m,x]=(0,c.useState)([]);(0,c.useEffect)(()=>{async function e(){let e=await fetch("/api/topics");p((await e.json()).map(e=>({id:e.id,name:e.title})))}(async function(){let e=await fetch("/api/categories");e.ok||(console.error("Failed to fetch data:",e.status,e.statusText),i.Ay.error("Failed to fetch categories")),r([{value:"",label:"Select Category"}].concat((await e.json()).map(e=>({value:e.name,label:e.name}))))})(),e()},[]),(0,c.useEffect)(()=>{fetch("/api/acheivements?fields=names").then(e=>e.json()).then(e=>{x(e)}).catch(e=>{i.Ay.error("Failed to fetch CTFs"),console.error("Failed to fetch data:",e)})},[]);let[f,h]=(0,c.useState)(null),[g,b]=(0,c.useState)(null),[y,v]=(0,c.useState)(null),[j,w]=(0,c.useState)([]),[N,C]=(0,c.useState)(""),[k,S]=(0,c.useState)({Title:"",Difficulty:"",Link:"",Category:"",Topics:[],Description:""}),A=e=>{w(r=>{let t=r.includes(e)?r.filter(r=>r!==e):[...r,e];return S(e=>({...e,Topics:t})),t})},_=e=>{let{name:r,value:t}=e.target;S(e=>({...e,[r]:t}))};async function F(e){e.preventDefault();try{let e=new FormData;e.append("Title",k.Title),e.append("Difficulty",k.Difficulty||""),e.append("Link",k.Link),e.append("Category",k.Category||""),e.append("Topics",JSON.stringify(k.Topics)),e.append("CTF",JSON.stringify(y)),e.append("Description",k.Description),f&&e.append("WriteupThumbnail",f),g&&e.append("WriteupFile",g);let r=fetch("/api/create/writeup",{method:"POST",body:e}).then(e=>e.json()).then(e=>{if("success"===e.status)S({Title:"",Difficulty:"",Link:"",Category:"",Topics:[],Description:""});else if("error"===e.status)throw Error(e.error);return e});i.Ay.promise(r,{loading:"Creating writeup...",success:"Writeup successfully created",error:e=>"Failed to create writeup: ".concat(e.message)})}catch(e){console.error("Error during submit:",e)}}let[T,D]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{D(!0)},[]),T)?(console.log(y),(0,l.jsxs)(a.A,{gradientPosition:"center",className:"p-10",children:[(0,l.jsx)("h1",{className:"text-[3rem] font-bold",children:"Create Writeup"}),(0,l.jsx)(i.Toaster,{}),(0,l.jsxs)("form",{onSubmit:F,className:"grid grid-cols-3 grid-rows-[6rem_6rem_6rem_6rem_6rem_6rem] my-5 gap-y-0 gap-x-10",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(n.A,{placeholder:"Title",version:"secondary",className:"rounded-xl",name:"Title",value:k.Title,onChange:_,required:!0}),(0,l.jsx)("label",{children:"Title"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(s.A,{className:"rounded-xl h-[3rem] text-left",placeholder:"Select Difficulty",name:"Difficulty",options:[{value:"",label:"Select Difficulty"},{value:"Easy",label:"Easy"},{value:"Medium",label:"Medium"},{value:"Hard",label:"Hard"},{value:"Insane",label:"Insane"},{value:"Impossible",label:"Impossible"}],onChange:e=>{e?S(r=>({...r,Difficulty:e.value})):S(e=>({...e,Difficulty:""}))},required:!0}),(0,l.jsx)("label",{children:"Difficulty"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(n.A,{placeholder:"Link to challenge source",version:"secondary",className:"rounded-xl",name:"Link",value:k.Link,onChange:_,required:!0}),(0,l.jsx)("label",{children:"Source"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(s.A,{className:"rounded-xl h-[3rem] text-left",placeholder:"Select Category",options:e,name:"Category",onChange:e=>{e?S(r=>({...r,Category:e.value})):S(e=>({...e,Category:""}))},required:!0}),(0,l.jsx)("label",{children:"Category"})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 row-span-5",children:[(0,l.jsxs)("div",{className:"rounded-xl h-[calc(28rem+2px)]  bg-secondary-tier1/50 border-2 border-secondary-tier2",children:[(0,l.jsx)(n.A,{onChange:e=>{C(e.target.value)},value:N,className:"h-[3rem] items-center px-4 text-primary flex text-lg rounded-b-none rounded-t-xl",placeholder:"Search Topics"}),(0,l.jsx)("div",{className:"overflow-auto text-primary h-[calc(25rem-2px)] rounded-none rounded-bl-xl rounded-br-xl w-[100%] bg-secondary-tier3 resize-none",children:t.map((e,r)=>e.name.toLowerCase().includes(N.toLowerCase())?(0,l.jsx)("span",{className:"rounded-full py-1 my-2 px-3 mx-1 inline-block bg-secondary-tier1/50 hover:cursor-pointer hover:brightness-125 ".concat(j.includes(e.id)?"bg-primary-tier1 text-white":"bg-secondary-tier1/50 text-primary"),onClick:()=>A(e.id),children:e.name},r):null)})]}),(0,l.jsx)("label",{children:"Topics"})]}),(0,l.jsx)(d.A,{accept:"image/*",onFileUpload:e=>{e&&h(e)},label:"Writeup Thumbnail",file:f}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(u.A,{options:m.map(e=>({label:e.title,id:e.id})),setSelectedOption:e=>{e?v({title:e.label,id:e.id}):v(null)},placeholder:"CTF"}),(0,l.jsxs)("label",{children:["Related CTF ",!(null==y?void 0:y.id)&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:"(CTF not found. It will be created.)"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 row-span-3 justify-start items-start",children:[(0,l.jsx)("textarea",{className:"text-primary placeholder-primary h-[20rem] rounded-xl w-[100%] bg-secondary-tier3 resize-none border-2 border-secondary-tier2 px-4 py-2 text-lg",placeholder:"Description",name:"Description",value:k.Description,onChange:_,required:!0}),(0,l.jsx)("label",{children:"Description"})]}),(0,l.jsx)(d.A,{accept:".md,.markdown",onFileUpload:e=>{e&&b(e)},label:"Writeup File",file:g}),(0,l.jsx)(o.A,{type:"submit",className:"row-span-1 h-[3rem] rounded-xl mt-[1rem]",children:"Create"})]})]})):null}},2978:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var l=t(5155),a=t(9795);let n=e=>{let{className:r,gradientPosition:t="center",children:n}=e;return(0,l.jsx)("div",{className:(0,a.QP)("w-full h-full","x-center"===t?"bg-gradient-to-r from-background via-secondary-tier3/80 to-background":"y-center"===t?"bg-gradient-to-b from-background via-secondary-tier3/80 to-background":"center"===t?"bg-radient-ellipse-c from-secondary-tier3/80 from-30% to-background to-100%":"top"===t?"bg-gradient-to-t from-secondary-tier3/80 to-background":"bottom"===t?"bg-gradient-to-b from-secondary-tier3/80 to-background":"left"===t?"bg-gradient-to-l from-secondary-tier3/80 to-background":"right"===t?"bg-gradient-to-r from-secondary-tier3/80 to-background":"",r),children:n})}},6723:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var l=t(5155),a=t(2115),n=t(3714);let s=e=>{let{option:r,setOption:t}=e;return(0,l.jsx)("div",{className:"font-bold cursor-pointer flex items-center gap-2 w-full py-2 px-4 hover:brightness-90 hover:backdrop-brightness-90",onClick:()=>{console.log(r.label),t(r.label)},children:(0,l.jsx)("span",{children:r.label})})},o=e=>{let{className:r,options:t,setSelectedOption:o,placeholder:i}=e;console.log(t);let[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=t.find(e=>e.label===c);e?o(e):o({label:c,id:null})},[c]),(0,l.jsxs)("div",{className:"".concat(r," relative"),children:[(0,l.jsx)(n.A,{value:c,onChange:e=>{d(e.target.value)},className:"rounded-xl",placeholder:i,onFocus:()=>{p(!0)},onBlur:()=>{setTimeout(()=>{p(!1)},100)}}),u&&(0,l.jsx)("div",{className:"overflow-auto flex flex-col absolute top-full left-0 bg-[#3f6473] rounded-xl w-full max-h-[33vh] h-fit",children:t.map(e=>{if(e.label.toLowerCase().includes(c.toLowerCase())){var r;return(0,l.jsx)(s,{option:e,setOption:d},null!==(r=e.id)&&void 0!==r?r:e.label)}})})]})}},6815:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var l=t(5155);t(2115);var a=t(2609),n=t(4310),s=t(9795),o=t(3831);let i=e=>{let{options:r,placeholder:t,onChange:i,className:c,version:d="primary",shadow:u=!0,border:p=!0,label:m,name:x,value:f,required:h=!1}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:(0,s.QP)("\n    text-primary\n    ".concat(u?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n    rounded-full\n    px-0 py-0\n    font-semibold\n    hover:brightness-90 \n    transition\n    duration-200\n    text-lg\n    focus:outline-none\n    focus:ring-2\n    focus:ring-primary\n    min-w-72\n    relative \n    z-10\n  "),"primary"===d?"bg-secondary-tier1/50":"bg-secondary-tier3",p?"border-2 border-secondary-tier2":"",c),children:(0,l.jsx)(n.Ay,{options:r,placeholder:t,onChange:i,styles:{control:e=>({...e,backgroundColor:"transparent",border:"none",boxShadow:"none",padding:"0.25rem 1rem 0.25rem 1rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",margin:0}),valueContainer:e=>({...e,padding:0}),menu:e=>({...e,borderRadius:"0.5rem",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",backgroundColor:"rgb(63, 100, 115)",zIndex:10,margin:0}),menuList:e=>({...e,padding:0,zIndex:10,margin:0}),option:(e,r)=>({...e,backgroundColor:"transparent",backdropFilter:r.isSelected?"brightness(0.8)":r.isFocused?"brightness(0.7)":"none",color:"inherit",padding:"8px 1rem",width:"100%",cursor:"pointer"}),placeholder:e=>({...e,color:"inherit"}),singleValue:e=>({...e,color:"inherit"}),dropdownIndicator:e=>({...e,color:"currentColor",padding:"0 0"}),indicatorSeparator:()=>({display:"none"}),clearIndicator:e=>({...e,padding:0})},components:{DropdownIndicator:e=>(0,l.jsx)(a.c.DropdownIndicator,{...e,children:(0,l.jsx)(o.A,{})})},name:x,value:f,required:h})}),m&&(0,l.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:m})]})}},3714:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var l=t(5155),a=t(9795);let n=e=>{let{value:r,placeholder:t,onInput:n,beforeIcon:s,afterIcon:o,className:i,version:c="primary",shadow:d=!0,label:u,name:p,required:m=!1,onChange:x,onBlur:f,onFocus:h,disabled:g=!1,onClick:b}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2",onClick:b,children:[(0,l.jsxs)("div",{className:(0,a.QP)("\n        text-primary\n        ".concat(d?"shadow-[0_0_2px_0_var(--tw-shadow-color)] shadow-primary/50":"","\n        rounded-full\n        px-4 py-2\n        font-semibold\n        hover:brightness-90 \n        transition\n        duration-200\n        flex items-center justify-center\n        text-lg\n        focus:outline-none\n        focus:ring-2\n        focus:ring-primary\n        flex \n        justify-between\n        min-w-72\n    "),"primary"===c?"bg-secondary-tier1/50":"bg-secondary-tier3","border-2 border-secondary-tier2",i),children:[s&&(0,l.jsx)("span",{className:"mr-2",children:s}),(0,l.jsx)("input",{disabled:g,className:"bg-transparent w-full placeholder:text-primary placeholder:font-normal",onInput:n,onChange:x,onBlur:f,onFocus:h,placeholder:t,type:"text",value:null!=r?r:"",name:p,required:m}),o&&(0,l.jsx)("span",{className:"ml-2",children:o})]}),u&&(0,l.jsx)("label",{className:"text-primary text-lg md:text-md ml-2",children:u})]})}},6203:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var l=t(5155),a=t(2115),n=t(5565);let s=e=>{let{onFileUpload:r,label:t,file:s,accept:o}=e,[i,c]=a.useState(null);return console.log(s),(0,l.jsxs)("div",{className:"flex flex-col gap-2 row-span-2",children:[(0,l.jsxs)("div",{className:"relative rounded-xl h-[calc(9rem+2px)] bg-secondary-tier1/50 z-10 border-2 border-secondary-tier2",children:[(0,l.jsxs)("div",{className:"flex flex-row h-[3rem] items-center",children:[(0,l.jsx)("p",{className:"px-4 text-primary text-lg",children:t}),(0,l.jsx)(n.default,{src:"/assets/record.png",className:"h-[1.5rem] w-[1.5rem] m-auto mr-3 block",height:3,width:3,alt:"upload"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center text-primary h-[calc(6rem-2px)] rounded-none rounded-bl-xl rounded-br-xl w-full bg-secondary-tier3 resize-none",children:[(0,l.jsx)("input",{type:"file",className:"top-0 absolute opacity-0 w-full rounded-none rounded-bl-xl rounded-br-xl h-full",onChange:e=>{var t;let l=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;r(l),l&&l.type.startsWith("image/")&&c(URL.createObjectURL(l))},name:"WriteupFile",accept:o,required:!0}),i?(0,l.jsx)(n.default,{src:i,alt:"Preview",className:"rounded-sm h-full",layout:"fill"}):s&&(0,l.jsx)("p",{className:"text-primary text-lg text-center",children:s.name})]})]}),(0,l.jsx)("label",{htmlFor:"WriteupFile",children:t})]})}},3831:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var l=t(5155);let a=t(2115).forwardRef((e,r)=>{let{className:t,fill:a,...n}=e;return(0,l.jsx)("svg",{className:t,ref:r,...n,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M7 15L12 20L17 15M7 9L12 4L17 9",stroke:"#BAEAFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",color:a||"#BAEAFF"})})});a.displayName="Search";let n=a}},e=>{var r=r=>e(e.s=r);e.O(0,[9795,7970,5037,4310,8441,1517,7358],()=>r(4562)),_N_E=e.O()}]);